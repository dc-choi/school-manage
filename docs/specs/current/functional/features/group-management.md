# Feature: 그룹 관리

> 이 문서는 기능의 **단일 정보원(Single Source of Truth)** 입니다.
> 기술적 구현 방법이 아닌 **"무엇을"** 만들지에 집중합니다.

## 상위 문서

- PRD: `docs/specs/prd/school-attendance.md`
- 기능 설계: `docs/specs/functional-design/group-management.md`

## 개요

계정은 자신이 관리하는 그룹을 조회/생성/수정/삭제하고, 그룹 단위 출석 현황을 확인한다.

## 배경

- 주일학교 학생들을 학년/반 단위로 관리해야 한다.
- 출석부는 그룹 단위로 조회하는 것이 기본 흐름이다.

## 사용자 스토리

### US-1: 그룹을 관리한다
- **사용자**: 교사/관리자
- **원하는 것**: 그룹을 추가/수정/삭제하고 목록을 확인하기
- **이유**: 학생 분류와 관리 업무를 원활히 하기 위해

### US-2: 그룹의 출석 현황을 확인한다
- **사용자**: 교사/관리자
- **원하는 것**: 특정 그룹의 출석 데이터를 확인하기
- **이유**: 출석 체크 및 관리에 활용하기 위해

### US-3: 그룹 상세 정보와 소속 학생을 확인한다 (로드맵 1단계)
- **사용자**: 교사/관리자
- **원하는 것**: 그룹 클릭 시 그룹 상세 페이지에서 소속 학생 목록을 확인하기
- **이유**: 그룹 단위로 학생을 빠르게 파악하기 위해

### US-4: 그룹명을 빠르게 수정한다 (로드맵 1단계)
- **사용자**: 교사/관리자
- **원하는 것**: 그룹 상세 페이지에서 그룹명을 인라인으로 수정하기
- **이유**: 별도 수정 페이지 없이 빠르게 수정하기 위해

### US-5: 여러 그룹을 한 번에 삭제한다 (로드맵 1단계)
- **사용자**: 교사/관리자
- **원하는 것**: 그룹 목록에서 여러 그룹을 선택하여 일괄 삭제하기
- **이유**: 학기 전환 등 대량 정리 작업을 효율적으로 하기 위해

## 기능 요구사항

### 필수 (Must Have)
- [x] 계정이 관리하는 그룹 목록을 조회할 수 있어야 한다.
- [x] 그룹을 생성할 수 있어야 한다.
- [x] 그룹 정보를 조회/수정/삭제할 수 있어야 한다.
- [x] 그룹 삭제는 복구 가능한 소프트 삭제 방식이어야 한다.
- [x] 그룹 단위 출석 현황(학생 목록/출석 데이터)을 조회할 수 있어야 한다.

### 필수 - 로드맵 1단계 (Must Have)
- [ ] 그룹 목록에서 그룹 클릭 시 상세 페이지로 이동해야 한다.
- [ ] 그룹 상세 페이지에서 그룹 정보와 소속 학생 목록을 조회할 수 있어야 한다.
- [ ] 그룹 상세 페이지에서 그룹명을 인라인으로 수정할 수 있어야 한다.
- [ ] 그룹 목록에서 다중 선택 체크박스를 제공해야 한다.
- [ ] 선택한 그룹을 일괄 삭제할 수 있어야 한다 (group.bulkDelete API).
- [ ] 테이블 UI에 호버 효과, 선택 상태 하이라이트가 있어야 한다.
- [ ] 삭제 시 확인 다이얼로그를 표시해야 한다.
- [ ] 작업 완료 시 토스트 메시지로 피드백을 제공해야 한다.

### 선택 (Nice to Have)
- [x] 없음 (현재 스코프)

## 엣지 케이스

| 케이스           | 예상 동작                 |
|---------------|-----------------------|
| 잘못된 groupId   | BAD_REQUEST 코드로 실패 응답 |
| 토큰 누락         | 인증 실패 응답              |
| 존재하지 않는 그룹 조회 | NOT_FOUND 코드로 실패 응답   |
| 그룹명 누락        | 실패 응답                 |
| year 누락/비정상   | 현재 연도로 처리             |
| 일괄 삭제 시 빈 배열 (로드맵 1단계) | BAD_REQUEST 코드로 실패 응답 |
| 일괄 삭제 시 일부 그룹 없음 (로드맵 1단계) | 존재하는 그룹만 삭제, deletedCount 반환 |
| 인라인 수정 시 빈 그룹명 (로드맵 1단계) | BAD_REQUEST 코드로 실패 응답 |

## 인수 조건 (Acceptance Criteria)

- [x] 그룹 목록 조회 시 계정과 그룹 배열이 반환된다.
- [x] 그룹 생성 시 생성된 그룹 정보가 반환된다.
- [x] 그룹 수정 시 변경된 그룹 정보가 반환된다.
- [x] 그룹 삭제 후 동일 ID 조회는 NOT_FOUND로 실패한다.
- [x] 그룹 출석 조회 시 연도/요일 배열/학생/출석 데이터가 반환된다.

### 인수 조건 - 로드맵 1단계
- [ ] 그룹 목록 행 클릭 시 `/groups/:id` 상세 페이지로 이동한다.
- [ ] 그룹 상세 페이지에서 그룹 정보와 학생 목록이 표시된다.
- [ ] 그룹명 클릭 또는 편집 아이콘 클릭 시 인라인 수정 모드로 전환된다.
- [ ] 인라인 수정 완료 시 API 호출 후 변경 사항이 반영된다.
- [ ] 그룹 목록에 전체 선택/개별 선택 체크박스가 표시된다.
- [ ] 선택된 그룹이 있을 때만 일괄 삭제 버튼이 활성화된다.
- [ ] 일괄 삭제 클릭 시 확인 다이얼로그가 표시된다.
- [ ] 일괄 삭제 완료 시 deletedCount가 반환되고 목록이 갱신된다.
- [ ] 테이블 행에 호버 시 하이라이트 효과가 적용된다.
- [ ] 작업 완료/실패 시 토스트 메시지가 표시된다.

## 관련 문서

- Task: `docs/specs/current/functional/tasks/group-management.md`
- Development: `docs/specs/current/functional/development/group-management.md`

---

**작성일**: 2026-01-05
**최종 수정**: 2026-01-22
**상태**: Approved (기본 + 로드맵 1단계)
