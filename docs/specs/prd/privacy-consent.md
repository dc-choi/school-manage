# PRD: 개인정보 제공동의

> SDD 작성자가 작성하는 제품 요구사항 문서입니다.
> 사업 에이전트의 `docs/business/` 문서를 기반으로 작성합니다.

## 배경/문제 요약

- **참고**: `docs/business/4_risk/risks.md` (리스크 6: 학생/보호자 정보의 민감성), `docs/business/6_roadmap/roadmap.md` (2단계)
- **문제**:
  - 현재 회원가입 시 개인정보 수집·이용에 대한 동의 절차가 없음
  - 서비스가 수집하는 정보: 계정 정보(아이디, 이름, 비밀번호) + 사용자가 입력하는 멤버 정보(이름, 세례명, 축일, 연락처, 출석 기록)
  - 개인정보보호법상 개인정보 수집 시 동의를 받아야 하며, 수집 목적·항목·보유 기간을 고지해야 함
  - 기존 가입 회원(현재 5개 단체)은 동의 없이 서비스를 사용 중
- **현재 상태**: 동의 절차 없이 회원가입 → 즉시 서비스 사용
- **목표 상태**: 회원가입 시 개인정보 동의 후 가입 + 기존 회원 소급 동의 수집

## 목표/성공 기준

- **목표**:
  - 신규 회원가입 시 개인정보 수집·이용 동의를 받는 절차 추가
  - 기존 회원이 로그인 시 소급 동의를 수집하는 장치 마련
  - 개인정보 처리방침을 사용자가 열람할 수 있도록 제공
- **성공 지표**:
  - 신규 가입자 100% 동의 완료 후 가입
  - 기존 회원 소급 동의율 100% (미동의 시 서비스 접근 차단)
- **측정 기간**: 배포 후 2주 내 기존 회원 동의 완료

## 사용자/대상

- **주요 사용자**:
  - 신규 가입자: 회원가입 시 동의
  - 기존 회원: 로그인 후 동의 화면 노출
- **사용 맥락**:
  - 회원가입 과정 (1회)
  - 기존 회원 최초 로그인 시 (1회)

## 범위

### 포함

- 회원가입 화면에 개인정보 수집·이용 동의 체크박스 추가
- 개인정보 처리방침 내용 작성 및 열람 UI
- 기존 회원 소급 동의 화면 (로그인 후 강제 노출)
- Account 테이블에 동의 일시 필드 추가
- 동의 여부 검증 (미동의 시 서비스 접근 차단)

### 제외

- 이용약관 (별도 작업으로 분리 가능)
- 마케팅 수신 동의 (현재 마케팅 메일 없음)
- 개인정보 삭제 요청 처리 (계정 자기 관리에서 다룸)
- 제3자 제공 동의 (현재 제3자 제공 없음)

## 사용자 시나리오

1. **신규 가입**: 사용자가 회원가입 화면에서 ID/이름/비밀번호 입력 후, "개인정보 수집·이용 동의" 체크박스를 선택해야 "무료로 시작하기" 버튼이 활성화됨. 동의 내용은 링크/모달로 상세 확인 가능.
2. **기존 회원 소급 동의**: 기존 회원이 로그인하면, 동의 기록이 없으므로 동의 화면이 강제 표시됨. 동의해야 서비스 사용 가능. 동의하지 않으면 로그아웃 처리.
3. **개인정보 처리방침 열람**: 가입 화면 또는 서비스 내에서 개인정보 처리방침 전문을 열람 가능.

## 요구사항

### 필수 (Must)

- [ ] 회원가입 시 "개인정보 수집·이용 동의" 체크박스 (필수)
- [ ] 체크박스 미선택 시 가입 버튼 비활성화
- [ ] 개인정보 처리방침 내용 열람 기능 (모달 또는 별도 페이지)
- [ ] Account 테이블에 `privacyAgreedAt` (동의 일시) 필드 추가
- [ ] 신규 가입 시 동의 일시 자동 기록
- [ ] 기존 회원 로그인 시 `privacyAgreedAt`이 null이면 동의 화면 강제 표시
- [ ] 소급 동의 완료 시 `privacyAgreedAt` 업데이트
- [ ] 미동의 상태에서 보호된 API 접근 차단

### 선택 (Should)

- [ ] 개인정보 처리방침 버전 관리 (향후 내용 변경 시 재동의 필요)
- [ ] 동의 철회 기능 (계정 자기 관리와 연계)

### 제외 (Out)

- 이용약관 별도 작성
- 마케팅 동의
- 제3자 제공 동의
- GDPR 대응 (국내 서비스)

## 제약/가정/리스크

- **제약**:
  - 개인정보 처리방침 내용은 법률 전문가 검토 없이 일반적인 형태로 작성 (소규모 서비스)
  - 기존 회원이 소급 동의를 거부할 경우 서비스 사용 불가
- **가정**:
  - 기존 회원(5개 단체)은 소급 동의에 큰 거부감이 없을 것
  - 개인정보 처리방침은 한국어 단일 언어
  - 동의 내용 변경 빈도는 낮음 (연 1회 이하)
- **리스크**:
  - 기존 회원이 소급 동의를 거부하면 서비스 이탈 가능 → 사전 공지로 완화
  - 개인정보 처리방침 내용의 법적 완결성 부족 → 향후 법률 자문 시 보완

## 의존성

- **내부**:
  - Account 테이블 마이그레이션 (privacyAgreedAt 필드 추가)
  - 기존 인증 플로우 (auth.signup, auth.login)
- **외부**:
  - 없음

## 롤아웃/검증

- **출시 단계**: 단일 배포 (신규 가입 + 소급 동의 동시 적용)
- **이벤트/로그**:
  - `privacy_consent_shown`: 동의 화면 노출
  - `privacy_consent_agreed`: 동의 완료
  - `privacy_consent_declined`: 동의 거부 (소급 동의 화면에서)
- **검증 방법**: 배포 후 기존 회원 동의 완료율 모니터링

## 오픈 이슈

- [ ] 개인정보 처리방침 내용 확정 (수집 항목, 보유 기간, 파기 방법 등)
- [ ] 소급 동의 거부 시 UX (로그아웃만? 안내 메시지?)
- [ ] 향후 처리방침 변경 시 재동의 프로세스 필요 여부

## 연결 문서

- 사업 문서: `docs/business/4_risk/risks.md` (리스크 6, 전략 6)
- 사업 문서: `docs/business/6_roadmap/roadmap.md` (2단계)
- 기능 설계: `docs/specs/functional-design/auth-account.md`
- PRD: `docs/specs/prd/school-attendance.md`

---

**작성일**: 2026-02-15
**작성자**: SDD 작성자
**상태**: Approved (구현 완료)
